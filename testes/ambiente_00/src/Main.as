package{	import flash.display.*;	import flash.text.*;	import flash.events.*;	import flash.geom.*;	import flash.system.*;	[SWF(width='400', height='500', backgroundColor='#ffffff', frameRate='30')]	public class Main extends Sprite	{		private var fundo:Bitmap;		private var img:BitmapData;		private var r:Rectangle;		private var debug:TextField;		public function Main()		{			addEventListener('addedToStage', function(e:Event):void			{				stage.scaleMode = 'noScale';				stage.align = 'TL';				stage.frameRate = 30;				stage.quality = "low";								stage.addEventListener(MouseEvent.MOUSE_MOVE, mouse);								stage.addEventListener(Event.RESIZE, resize);				resize(null);				OdorArea.initMatrix();				var odor:Odor = new Odor();				addEventListener('enterFrame', anim);			});			addChild( fundo = new Bitmap( img ) );						var char:Char = new Char();			addChild( char );			addChild( debug = new TextField() );			debug.multiline = true;			debug.selectable = false;			debug.width = 200;			debug.height = 300;		}				private function resize( e:Event ):void {			if (img) img.dispose();			img = new BitmapData( stage.stageWidth, stage.stageHeight, true, 0x00ffffff );			fundo.bitmapData = img;			r = new Rectangle(0,0, stage.stageWidth, stage.stageHeight );			OdorArea.calcule( this.stage );		}				private function mouse( e:MouseEvent ):void {			new Odor( e.stageX, e.stageY );		}		private var swp:int=0;		private function anim( e:Event):void {			img.lock();			img.fillRect(r,0x00ffffff);			Odor.update(img);			img.unlock();			if (!swp) OdorArea.draw(this.graphics);			swp++;			swp %= 5;			debug.text = "fps: " + stage.frameRate + "\n" +				"mem: " + String(System.totalMemory) + "\n" +				"part: " + String( Odor.p.length );		}					}}